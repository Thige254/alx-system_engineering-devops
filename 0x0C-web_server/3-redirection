#!/usr/bin/env bash

# Install nginx with the -y flag for non-interactive installation
sudo apt-get update
sudo apt-get install -y nginx

# Configure nginx to listen on port 80
sudo sed -i 's/^\(.*listen \)80;/\180;/' /etc/nginx/sites-available/default

# Restart nginx without using systemctl
sudo /etc/init.d/nginx restart

# Create an HTML file with "Hello World!"
echo "Hello World!" | sudo tee /var/www/html/index.html > /dev/null

# Configure redirection for /redirect_me
echo "location /redirect_me {
    return 301 https://www.youtube.com/watch?v=QH2-TGUlwu4;
}" | sudo tee -a /etc/nginx/sites-available/default > /dev/null

# Restart nginx to apply changes
sudo /etc/init.d/nginx restart

# Output success message
echo "Nginx installed and configured. Hello World page created. Redirection configured."
