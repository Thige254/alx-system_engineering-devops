#!/usr/bin/env bash
# This script gracefully reloads Gunicorn without downtime

echo "Before Reload:"
ps auxf | grep '[g]unicorn'

# Gracefully reload Gunicorn by sending a HUP signal to the master
pkill -HUP -f '[g]unicorn'

# Check if Gunicorn is still running after reload
if pgrep -f '[g]unicorn'; then
  echo "OK"
else
  echo "Reload Failed"
fi
